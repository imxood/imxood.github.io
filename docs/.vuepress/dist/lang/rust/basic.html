<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <title>Rust 学习笔记 | 博客</title><meta name="description" content="Just playing around"><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="generator" content="VuePress 2.0.0-beta.6">
    <link rel="preload" href="/assets/js/runtime~app.d412a430.js" as="script"><link rel="preload" href="/assets/css/styles.870e5c21.css" as="style"><link rel="preload" href="/assets/js/693.7d6c3ca2.js" as="script"><link rel="preload" href="/assets/js/app.fb723cf1.js" as="script">
    <link rel="stylesheet" href="/assets/css/styles.870e5c21.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><header class="navbar"><div class="toggle-sidebar-button"><svg class="icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z" class=""></path></svg></div><span><a href="/" class=""><!----><span class="site-name">博客</span></a></span><div class="navbar-links-wrapper" style=""><!--[--><!--]--><nav class="navbar-links can-hide"><!--[--><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="语言"><span class="title">语言</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="语言"><span class="title">语言</span><span class="right arrow"></span></button><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/lang/rust/" class="nav-link router-link-active" aria-label="Rust"><!--[--><!--]--> Rust <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-links-item"><a class="nav-link external" href="https://github.com/imxood/imxood.github.io" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><!----></div></header><div class="sidebar-mask"></div><aside class="sidebar"><nav class="navbar-links"><!--[--><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="语言"><span class="title">语言</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="语言"><span class="title">语言</span><span class="right arrow"></span></button><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/lang/rust/" class="nav-link router-link-active" aria-label="Rust"><!--[--><!--]--> Rust <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-links-item"><a class="nav-link external" href="https://github.com/imxood/imxood.github.io" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-links"><!--[--><!--[--><section class="sidebar-group"><p class="sidebar-heading active">语言</p><ul class=""><li><!--[--><a href="/lang/rust/" class="nav-link router-link-active sidebar-link" aria-label="Rust"><!--[--><!--]--> Rust <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/lang/rust/basic.html" class="router-link-active router-link-exact-active nav-link router-link-active sidebar-link active" aria-label="Rust 学习笔记"><!--[--><!--]--> Rust 学习笔记 <!--[--><!--]--></a><ul class="sidebar-sub-headers"><li><!--[--><a aria-current="page" href="/lang/rust/basic.html#rust-的-安装与卸载" class="router-link-active router-link-exact-active nav-link sidebar-link" aria-label="Rust 的 安装与卸载"><!--[--><!--]--> Rust 的 安装与卸载 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/lang/rust/basic.html#使用特定的-rust-版本" class="router-link-active router-link-exact-active nav-link sidebar-link" aria-label="使用特定的 rust 版本"><!--[--><!--]--> 使用特定的 rust 版本 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/lang/rust/basic.html#vscode-中-rust-的插件" class="router-link-active router-link-exact-active nav-link sidebar-link" aria-label="vscode 中 rust 的插件"><!--[--><!--]--> vscode 中 rust 的插件 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/lang/rust/basic.html#rust-hello-world" class="router-link-active router-link-exact-active nav-link sidebar-link" aria-label="Rust hello_world"><!--[--><!--]--> Rust hello_world <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/lang/rust/basic.html#使用-cargo-创建项目" class="router-link-active router-link-exact-active nav-link sidebar-link" aria-label="使用 Cargo 创建项目"><!--[--><!--]--> 使用 Cargo 创建项目 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/lang/rust/basic.html#库" class="router-link-active router-link-exact-active nav-link sidebar-link" aria-label="库"><!--[--><!--]--> 库 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/lang/rust/basic.html#gui-开发" class="router-link-active router-link-exact-active nav-link sidebar-link" aria-label="GUI 开发"><!--[--><!--]--> GUI 开发 <!--[--><!--]--></a><ul class="sidebar-sub-headers"><li><!--[--><a aria-current="page" href="/lang/rust/basic.html#iced" class="router-link-active router-link-exact-active nav-link sidebar-link" aria-label="iced"><!--[--><!--]--> iced <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/lang/rust/basic.html#iced-编译-并-运行所有的-examples" class="router-link-active router-link-exact-active nav-link sidebar-link" aria-label="iced: 编译 并 运行所有的 examples"><!--[--><!--]--> iced: 编译 并 运行所有的 examples <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/lang/rust/basic.html#iced-例子" class="router-link-active router-link-exact-active nav-link sidebar-link" aria-label="iced 例子"><!--[--><!--]--> iced 例子 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/lang/rust/basic.html#bevy-游戏引擎" class="router-link-active router-link-exact-active nav-link sidebar-link" aria-label="bevy, 游戏引擎"><!--[--><!--]--> bevy, 游戏引擎 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li><li><!--[--><a aria-current="page" href="/lang/rust/basic.html#libusb-usb库" class="router-link-active router-link-exact-active nav-link sidebar-link" aria-label="libusb, usb库"><!--[--><!--]--> libusb, usb库 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/lang/rust/basic.html#wasm-开发" class="router-link-active router-link-exact-active nav-link sidebar-link" aria-label="wasm 开发"><!--[--><!--]--> wasm 开发 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/lang/rust/basic.html#vue-vite-rust-wasm" class="router-link-active router-link-exact-active nav-link sidebar-link" aria-label="vue vite rust wasm"><!--[--><!--]--> vue vite rust wasm <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li></ul></section><!--]--><!--]--></ul><!--[--><!--]--></aside><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><h1 id="rust-学习笔记"><a class="header-anchor" href="#rust-学习笔记">#</a> Rust 学习笔记</h1><h2 id="rust-的-安装与卸载"><a class="header-anchor" href="#rust-的-安装与卸载">#</a> Rust 的 安装与卸载</h2><pre><code>参考链接:
    https://www.rust-lang.org/zh-CN/tools/install

安装:
    curl --proto &#39;=https&#39; --tlsv1.2 https://sh.rustup.rs -sSf | sh

版本号:
    rustc --version

升级:
    rustup update stable
    rustup update

使用 不同 版本:
    rustup default stable
    rustup default nightly

添加工具:
    cargo install cargo-generate
    cargo install cargo-edit
    cargo install mdbook

卸载:
    rustup self uninstall
</code></pre><h2 id="使用特定的-rust-版本"><a class="header-anchor" href="#使用特定的-rust-版本">#</a> 使用特定的 rust 版本</h2><pre><code>参考: https://doc.rust-lang.org/edition-guide/rust-2018/rustup-for-managing-rust-versions.html

rustup toolchain install nightly-2020-11-19
rustup toolchain list
rustup default nightly-2020-11-19

ps:
    &quot;2020-11-19&quot; 这个时间是在 rust 的 git 中的tag上找的

# 安装 nightly 版本的工具链
rustup toolchain install nightly

# 对当前项目使用 nightly
rustup override set nightly

# 对所有项目使用 nightly
rustup default nightly

# 工具
rustup component add clippy

## riscv
rustup target add riscv32imac-unknown-none-elf
</code></pre><h2 id="vscode-中-rust-的插件"><a class="header-anchor" href="#vscode-中-rust-的插件">#</a> vscode 中 rust 的插件</h2><pre><code>1. rust-analyzer
2. Crates
3. Better TOML
4. CodeLLDB
</code></pre><h2 id="rust-hello-world"><a class="header-anchor" href="#rust-hello-world">#</a> Rust hello_world</h2><pre><code>编写点一个程序:
    vim main.rs

    fn main() {
        println!(&quot;Hello, world!&quot;);
    }

编译:
    rustc main.rs

运行:
    ./main
</code></pre><h2 id="使用-cargo-创建项目"><a class="header-anchor" href="#使用-cargo-创建项目">#</a> 使用 Cargo 创建项目</h2><pre><code>创建项目 hello_cargo:
    cargo new hello_cargo

cd hello_cargo

编译 并生成可执行程序:
    cargo build
    cargo build --release

编译 但不生成 可执行程序:
    cargo check

运行目标程序 (也可以一步构建项目):
    cargo run

创建:
    cargo new hello_world &lt;--bin&gt;, 创建一个二进制程序
    cargo new hello_world --lib, 创建一个库
</code></pre><h2 id="库"><a class="header-anchor" href="#库">#</a> 库</h2><pre><code>kurbo
    曲线工具

lyon
    路径细分库, 可以用于基于GPU的2D图形渲染


tokio
    https://github.com/tokio-rs/tokio

embedded_graphics
    mcu gui

embedded_sdmmc
</code></pre><h2 id="gui-开发"><a class="header-anchor" href="#gui-开发">#</a> GUI 开发</h2><h3 id="iced"><a class="header-anchor" href="#iced">#</a> iced</h3><pre><code>sudo apt install libssl-dev

官方的例子:

    git clone https://github.com/hecrj/iced.git

    cd iced

    cargo build

    // --features glow,glow_canvas
    cargo run --package todos

// 如果无法运行, 就安装下面的软件包
sudo apt install libvulkan1 mesa-vulkan-drivers vulkan-utils
</code></pre><h3 id="iced-编译-并-运行所有的-examples"><a class="header-anchor" href="#iced-编译-并-运行所有的-examples">#</a> iced: 编译 并 运行所有的 examples</h3><pre><code>#!/bin/bash

examples=(iced_core iced_futures iced_graphics iced_native iced_style iced_glow iced_glutin iced_winit iced_web iced_wgpu bezier_tool iced clock color_palette counter custom_widget download_progress events game_of_life geometry integration pane_grid pick_list pokedex progress_bar qr_code scrollable solar_system stopwatch styling svg todos tour)

for example in ${examples[@]}; do
    cargo build --verbose --package $example
done

for example in ${examples[@]}; do
    echo &quot;start run: cargo run --verbose --package $example&quot;
    cargo run --verbose --package $example
done
</code></pre><h3 id="iced-例子"><a class="header-anchor" href="#iced-例子">#</a> iced 例子</h3><pre><code>学习基本的布局:
    target/debug/pane_grid
    examples/tour

学习canvas:
    examples/clock
</code></pre><h3 id="bevy-游戏引擎"><a class="header-anchor" href="#bevy-游戏引擎">#</a> bevy, 游戏引擎</h3><pre><code>git clone https://github.com/bevyengine/bevy
cargo run --example breakout
</code></pre><h2 id="libusb-usb库"><a class="header-anchor" href="#libusb-usb库">#</a> libusb, usb库</h2><pre><code>在windows上找不到libusb库, 在 ~/.cargo/config 中添加:

[target.x86_64-pc-windows-msvc.&#39;usb-1.0&#39;]
rustc-link-search = [&#39;D:\libs\64bit&#39;]
rustc-link-lib = [&#39;libusb-1.0&#39;]
</code></pre><h2 id="wasm-开发"><a class="header-anchor" href="#wasm-开发">#</a> wasm 开发</h2><pre><code>安装 wasm-pack:

    curl https://rustwasm.github.io/wasm-pack/installer/init.sh -sSf | sh

cargo install cargo-generate

cargo generate --git https://github.com/rustwasm/wasm-pack-template -n wasm-app

cd wasm-app
wasm-pack build

npm init wasm-app www

cd www
yarn

cd ../pkg
yarn link

cd ../www
yarn link &quot;wasm-app&quot;
</code></pre><h2 id="vue-vite-rust-wasm"><a class="header-anchor" href="#vue-vite-rust-wasm">#</a> vue vite rust wasm</h2><pre><code>yarn create @vitejs/app my-vue-app --template vue

cd my-vue-app
yarn add -D vite-plugin-rsw

yarn

cargo generate --git https://github.com/rustwasm/wasm-pack-template -n wasm-app

vite.config.js:

    import { defineConfig } from &quot;vite&quot;;
    import vue from &quot;@vitejs/plugin-vue&quot;;
    import ViteRsw from &#39;vite-plugin-rsw&#39;;

    // https://vitejs.dev/config/
    export default defineConfig({
        plugins: [
            vue(),
            ViteRsw({
                mode: &quot;release&quot;,
                crates: [&quot;wasm-app&quot;],
            }),
        ],
    });
</code></pre><!--]--></div><footer class="page-meta"><div class="meta-item edit-link"><a class="nav-link external meta-item-label" href="https://github.com/imxood/imxood.github.io/edit/main/docs/lang/rust/basic.md" rel="noopener noreferrer" target="_blank" aria-label="编辑文档！"><!--[--><!--]--> 编辑文档！ <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><!----><!----></footer><nav class="page-nav"><p class="inner"><span class="prev"> ← <a href="/lang/rust/" class="nav-link router-link-active" aria-label="Rust"><!--[--><!--]--> Rust <!--[--><!--]--></a></span><!----></p></nav><!--[--><!--]--></main></div><!----><!--]--></div>
    <script src="/assets/js/runtime~app.d412a430.js" defer></script><script src="/assets/js/693.7d6c3ca2.js" defer></script><script src="/assets/js/app.fb723cf1.js" defer></script>
  </body>
</html>
